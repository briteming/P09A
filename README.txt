# 功能-探测网络上的SOCKS5端口 
# 配置文件 参数指定 config.json中 CheckURL 为检测socks5时需要的某个网站地址
# 启动 重启 run.sh
# 定时重启 15 5 * * * /root/P09A/run.sh 2>&1 >/dev/null
# 依赖 random requests json datetime time sqlite3
# 运行环境 python3 
# 代码部署于服务器 
Active Runtime No.30 Y 2020-9-17
Active Runtime No.13 Y 2020-9-17
Active Runtime No.51 Y 2020-9-17
Active Runtime No.78 N
Active Runtime No.00 N 
Active BACKUP  No.19 Y 2020-9-17
# 目录结构
├── config.json
├── README.txt
├── run.sh
├── socks5.db
├── start.py
└── user_agent.py
# 服务器VPS配置比较低 一般都是1核心 单进程运行就行了
# 注意后续的磁盘目录 socks5.db 存储的量的增长速度




CREATE TABLE `socks5` (`idx` INTEGER not null primary key autoincrement, 
`itime` TEXT,  
`ip` TEXT not null,
`port` INTEGER not null,
`itimestamp` INTEGER,
`status` TEXT,
`remark` TEXT
);
CREATE UNIQUE INDEX `idx_socks5_1st` on `socks5` (`ip`,`port`);


{
  "idx": "索引index",
  "itime": "可视化的时间 format time Example: 2020-06-08 14:20:25",
  "ip": "IPv4 address Example: 239.56.253.193",
  "port": "Port 1-65535 Example: 1080",
  "itimestamp": "timestamp 时间戳",
  "status": "检测socks5可用性的信息 value Y or N  status check result",
  "remark": "一些备注的信息 一般为空 some remark text "
}



运行测试
root@SERVER:~/P09A# sqlite3  socks5.db 'select * from socks5 limit 30;'
1|2020-09-17 10:52:51|227.38.41.55|1080|1600311171|N|
2|2020-09-17 10:52:51|227.38.41.55|1081|1600311171|N|
3|2020-09-17 10:52:51|227.38.41.55|1087|1600311171|N|
4|2020-09-17 10:52:51|227.38.41.55|1089|1600311171|N|
5|2020-09-17 10:52:51|227.38.41.55|8080|1600311171|N|
6|2020-09-17 10:52:51|227.38.41.55|10808|1600311171|N|
7|2020-09-17 10:52:51|227.38.41.55|38801|1600311171|N|
8|2020-09-17 10:52:51|227.38.41.55|52220|1600311171|N|
9|2020-09-17 10:52:57|131.15.225.20|1080|1600311177|N|
10|2020-09-17 10:53:03|131.15.225.20|1081|1600311183|N|
11|2020-09-17 10:53:09|131.15.225.20|1087|1600311189|N|
12|2020-09-17 10:53:15|131.15.225.20|1089|1600311195|N|
13|2020-09-17 10:53:21|131.15.225.20|8080|1600311201|N|
14|2020-09-17 10:53:27|131.15.225.20|10808|1600311207|N|
15|2020-09-17 10:53:33|131.15.225.20|38801|1600311213|N|
16|2020-09-17 10:53:39|131.15.225.20|30794|1600311219|N|
17|2020-09-17 10:53:45|31.119.60.76|1080|1600311225|N|
18|2020-09-17 10:53:51|31.119.60.76|1081|1600311231|N|
19|2020-09-17 10:53:57|31.119.60.76|1087|1600311237|N|
20|2020-09-17 10:54:03|31.119.60.76|1089|1600311243|N|
21|2020-09-17 10:54:10|31.119.60.76|8080|1600311250|N|
22|2020-09-17 10:54:16|31.119.60.76|10808|1600311256|N|
23|2020-09-17 10:54:22|31.119.60.76|38801|1600311262|N|

